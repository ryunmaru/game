# Mini FPS 3D (ブラウザゲーム)

Three.js ベースの **3D FPS** です。PC/スマホ両対応です。

## ブラックアウトの原因（今回の修正）

- 以前は `importmap` + bare import (`import 'three'`) 方式でした。
- 一部のモバイルSafari環境では `importmap` 解決が失敗し、Three.js の読込エラーで描画初期化が止まり、HUDだけ見えて画面が黒のままになるケースがありました。
- 現在は **直接URLの動的 import** に変更し、読み込み失敗時は画面中央にエラーメッセージを表示するようにしています。

## 変更点

- WebGL + Three.js の実3D描画
- 3D空間で壁/床/天井/敵メッシュを描画
- 敵AIを状態遷移（patrol/chase/combat）で制御
- 命中時の敵フラッシュ、クロスヘア反応、スコア加算
- スマホは左右スティック + FIRE

## 遊び方

1. サーバーを起動
2. `http://localhost:8000` を開く
3. クリック/タップで開始

## 操作

### PC
- WASD: 移動
- マウス: 視点
- クリック: 射撃
- R: リスタート

### スマホ
- 左スティック: 移動
- 右スティック: 視点
- FIRE: 射撃

## 起動

```bash
npm run dev
```

## 注意

- Three.js は CDN（jsDelivr）から読み込むためネット接続が必要です。
